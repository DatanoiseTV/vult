
/* Code automatically generated by Vult https://github.com/modlfo/vult */
#include "gates.h"

fix16_t Gates_velToCV(int vel){
   return fix_mul(int_to_fix(vel),0x204 /* 0.007874 */);
}

void Gates__ctx_type_1_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1 _ctx;
   int_init_array(8,0,_ctx.vel);
   _ctx.gates_state_ret_7 = 0x0 /* 0.000000 */;
   _ctx.gates_state_ret_6 = 0x0 /* 0.000000 */;
   _ctx.gates_state_ret_5 = 0x0 /* 0.000000 */;
   _ctx.gates_state_ret_4 = 0x0 /* 0.000000 */;
   _ctx.gates_state_ret_3 = 0x0 /* 0.000000 */;
   _ctx.gates_state_ret_2 = 0x0 /* 0.000000 */;
   _ctx.gates_state_ret_1 = 0x0 /* 0.000000 */;
   _ctx.gates_state_ret_0 = 0x0 /* 0.000000 */;
   _output_ = _ctx;
   return ;
}

void Gates_gates_noteOn_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

void Gates_gates_noteOn(Gates__ctx_type_1 &_ctx, int note, int velocity){
   if((note >= 36) && (note <= 43)){
      int n;
      n = (note + (-36));
      int_set(_ctx.vel,n,velocity);
   }
}

void Gates_gates_noteOff_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

void Gates_gates_noteOff(Gates__ctx_type_1 &_ctx, int note){
   if((note >= 36) && (note <= 43)){
      int n;
      n = (note + (-36));
      int_set(_ctx.vel,n,0);
   }
}

void Gates_gates_state_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

void Gates_gates_state(Gates__ctx_type_1 &_ctx){
   fix16_t vel1;
   vel1 = Gates_velToCV(int_get(_ctx.vel,0));
   fix16_t vel2;
   vel2 = Gates_velToCV(int_get(_ctx.vel,1));
   fix16_t vel3;
   vel3 = Gates_velToCV(int_get(_ctx.vel,2));
   fix16_t vel4;
   vel4 = Gates_velToCV(int_get(_ctx.vel,3));
   fix16_t vel5;
   vel5 = Gates_velToCV(int_get(_ctx.vel,4));
   fix16_t vel6;
   vel6 = Gates_velToCV(int_get(_ctx.vel,5));
   fix16_t vel7;
   vel7 = Gates_velToCV(int_get(_ctx.vel,6));
   fix16_t vel8;
   vel8 = Gates_velToCV(int_get(_ctx.vel,7));
   _ctx.gates_state_ret_0 = vel1;
   _ctx.gates_state_ret_1 = vel2;
   _ctx.gates_state_ret_2 = vel3;
   _ctx.gates_state_ret_3 = vel4;
   _ctx.gates_state_ret_4 = vel5;
   _ctx.gates_state_ret_5 = vel6;
   _ctx.gates_state_ret_6 = vel7;
   _ctx.gates_state_ret_7 = vel8;
   return ;
}

void Gates_gates_state_ret_0_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_0(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_0;
}

void Gates_gates_state_ret_1_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_1(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_1;
}

void Gates_gates_state_ret_2_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_2(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_2;
}

void Gates_gates_state_ret_3_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_3(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_3;
}

void Gates_gates_state_ret_4_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_4(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_4;
}

void Gates_gates_state_ret_5_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_5(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_5;
}

void Gates_gates_state_ret_6_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_6(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_6;
}

void Gates_gates_state_ret_7_init(Gates__ctx_type_1 &_output_){
   Gates__ctx_type_1_init(_output_);
   return ;
}

fix16_t Gates_gates_state_ret_7(Gates__ctx_type_1 &_ctx){
   return _ctx.gates_state_ret_7;
}

void Gates__ctx_type_2_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2 _ctx;
   _ctx.process_ret_7 = 0x0 /* 0.000000 */;
   _ctx.process_ret_6 = 0x0 /* 0.000000 */;
   _ctx.process_ret_5 = 0x0 /* 0.000000 */;
   _ctx.process_ret_4 = 0x0 /* 0.000000 */;
   _ctx.process_ret_3 = 0x0 /* 0.000000 */;
   _ctx.process_ret_2 = 0x0 /* 0.000000 */;
   _ctx.process_ret_1 = 0x0 /* 0.000000 */;
   _ctx.process_ret_0 = 0x0 /* 0.000000 */;
   Gates__ctx_type_1_init(_ctx.gates);
   _ctx.channel_in = 0;
   _output_ = _ctx;
   return ;
}

void Gates_process_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

void Gates_process(Gates__ctx_type_2 &_ctx, int c){
   _ctx.channel_in = c;
   Gates_gates_state(_ctx.gates);
   _ctx.process_ret_0 = Gates_gates_state_ret_0(_ctx.gates);
   _ctx.process_ret_1 = Gates_gates_state_ret_1(_ctx.gates);
   _ctx.process_ret_2 = Gates_gates_state_ret_2(_ctx.gates);
   _ctx.process_ret_3 = Gates_gates_state_ret_3(_ctx.gates);
   _ctx.process_ret_4 = Gates_gates_state_ret_4(_ctx.gates);
   _ctx.process_ret_5 = Gates_gates_state_ret_5(_ctx.gates);
   _ctx.process_ret_6 = Gates_gates_state_ret_6(_ctx.gates);
   _ctx.process_ret_7 = Gates_gates_state_ret_7(_ctx.gates);
   return ;
}

void Gates_process_ret_0_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_0(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_0;
}

void Gates_process_ret_1_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_1(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_1;
}

void Gates_process_ret_2_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_2(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_2;
}

void Gates_process_ret_3_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_3(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_3;
}

void Gates_process_ret_4_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_4(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_4;
}

void Gates_process_ret_5_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_5(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_5;
}

void Gates_process_ret_6_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_6(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_6;
}

void Gates_process_ret_7_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

fix16_t Gates_process_ret_7(Gates__ctx_type_2 &_ctx){
   return _ctx.process_ret_7;
}

void Gates_noteOn_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

void Gates_noteOn(Gates__ctx_type_2 &_ctx, int note, int velocity, int channel){
   if(_ctx.channel_in == channel){
      Gates_gates_noteOn(_ctx.gates,note,velocity);
   }
}

void Gates_noteOff_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

void Gates_noteOff(Gates__ctx_type_2 &_ctx, int note, int channel){
   if(_ctx.channel_in == channel){
      Gates_gates_noteOff(_ctx.gates,note);
   }
}

void Gates_controlChange_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

void Gates_controlChange(Gates__ctx_type_2 &_ctx, int control, int value, int channel){

}

void Gates_default_init(Gates__ctx_type_2 &_output_){
   Gates__ctx_type_2_init(_output_);
   return ;
}

void Gates_default(Gates__ctx_type_2 &_ctx){

}


