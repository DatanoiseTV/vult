
/* Code automatically generated by Vult https://github.com/modlfo/vult */
#include "sff_ff.h"

void Sff_ff__ctx_type_0_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0 _ctx;
   _ctx.process_ret_1 = 0.f;
   _ctx.process_ret_0 = 0.f;
   _output_ = _ctx;
   return ;
}

void Sff_ff_process_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0_init(_output_);
   return ;
}

void Sff_ff_process(Sff_ff__ctx_type_0 &_ctx, float a, float b){
   _ctx.process_ret_0 = (a + b);
   _ctx.process_ret_1 = (a + (- b));
   return ;
}

void Sff_ff_process_ret_0_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0_init(_output_);
   return ;
}

float Sff_ff_process_ret_0(Sff_ff__ctx_type_0 &_ctx){
   return _ctx.process_ret_0;
}

void Sff_ff_process_ret_1_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0_init(_output_);
   return ;
}

float Sff_ff_process_ret_1(Sff_ff__ctx_type_0 &_ctx){
   return _ctx.process_ret_1;
}

void Sff_ff_noteOn_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0_init(_output_);
   return ;
}

void Sff_ff_noteOn(Sff_ff__ctx_type_0 &_ctx, int note, int velocity, int channel){

}

void Sff_ff_noteOff_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0_init(_output_);
   return ;
}

void Sff_ff_noteOff(Sff_ff__ctx_type_0 &_ctx, int note, int channel){

}

void Sff_ff_controlChange_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0_init(_output_);
   return ;
}

void Sff_ff_controlChange(Sff_ff__ctx_type_0 &_ctx, int control, int value, int channel){

}

void Sff_ff_default_init(Sff_ff__ctx_type_0 &_output_){
   Sff_ff__ctx_type_0_init(_output_);
   return ;
}

void Sff_ff_default(Sff_ff__ctx_type_0 &_ctx){

}



extern "C" {

static t_class *sff_ff_tilde_class;

typedef struct _sff_ff_tilde {
   t_pxobject  x_obj;
   float dummy;
   
   float in0_value;
   short in0_connected;
   float in1_value;
   short in1_connected;
   Sff_ff_process_type data;
} t_sff_ff_tilde;

void sff_ff_tilde_perform(t_sff_ff_tilde *x, t_object *dsp64, double **ins, long numins, double **outs, long numouts, long sampleframes, long flags, void *userparam)
{
   
   double *in_0 = ins[0];
   double *in_1 = ins[1];
   double *out_0 = outs[0];
   double *out_1 = outs[1];

   int n = sampleframes;
   while (n--) {
   
   float in_0_value = x->in0_connected? *(in_0++): x->in0_value;
   float in_1_value = x->in1_connected? *(in_1++): x->in1_value;
   
   _tuple___real_real__ ret;  Sff_ff_process(x->data,(float) in_0_value,(float) in_1_value,ret);
   *(out_0++) = (float) ret.field_0;
   *(out_1++) = (float) ret.field_1;

   }
}

void sff_ff_tilde_dsp(t_sff_ff_tilde *x, t_object *dsp64, short *count, double samplerate, long maxvectorsize, long flags)
{
   
   x->in0_connected = count[0];
   x->in1_connected = count[1];
   object_method(dsp64, gensym("dsp_add64"), x, sff_ff_tilde_perform, 0, NULL);
}

void *sff_ff_tilde_new(t_symbol *s, long argc, t_atom *argv)
{
   t_sff_ff_tilde *x = (t_sff_ff_tilde *)object_alloc(sff_ff_tilde_class);

   Sff_ff_process_init(x->data);
   Sff_ff_default(x->data);
   dsp_setup((t_pxobject *)x, 2);
   
   outlet_new((t_object *)x, "signal");
   outlet_new((t_object *)x, "signal");

   return (void *)x;
}

void sff_ff_tilde_delete(t_sff_ff_tilde *x){

}


void sff_ff_noteOn(t_sff_ff_tilde *x, double note, double velocity, double channel){
   if((int)velocity) Sff_ff_noteOn(x->data,(int)note,(int)velocity,(int)channel);
   else Sff_ff_noteOff(x->data,(int)note,(int)channel);
}


void sff_ff_noteOff(t_sff_ff_tilde *x, double note, double channel) {
   Sff_ff_noteOff(x->data,(int)note,(int)channel);
}


void sff_ff_controlChange(t_sff_ff_tilde *x, double control, double value, double channel) {
   Sff_ff_controlChange(x->data,(int)control,(int)value,(int)channel);
}


void sff_ff_float(t_sff_ff_tilde *x, double f){
   int in = proxy_getinlet((t_object *)x);
   
   if(in == 0) x->in0_value = f;
   if(in == 1) x->in1_value = f;
}

void ext_main(void *r) {
   sff_ff_tilde_class = class_new("sff_ff~",
      (method)sff_ff_tilde_new, // constructor function
      (method)sff_ff_tilde_delete, // destructor function
      (long)sizeof(t_sff_ff_tilde), // size of the object
       0L, A_GIMME, 0); // arguments passed

   class_addmethod(sff_ff_tilde_class,(method)sff_ff_tilde_dsp, "dsp64", A_CANT, 0);

   class_addmethod(sff_ff_tilde_class, (method)sff_ff_noteOn,        "noteOn",        A_DEFFLOAT, A_DEFFLOAT, A_DEFFLOAT, 0);
   class_addmethod(sff_ff_tilde_class, (method)sff_ff_noteOff,       "noteOff",       A_DEFFLOAT, A_DEFFLOAT, 0);
   class_addmethod(sff_ff_tilde_class, (method)sff_ff_controlChange, "controlChange", A_DEFFLOAT, A_DEFFLOAT, A_DEFFLOAT, 0);
   class_addmethod(sff_ff_tilde_class, (method)sff_ff_float, "float", A_FLOAT, 0);

   class_dspinit(sff_ff_tilde_class);
   class_register(CLASS_BOX, sff_ff_tilde_class);
}

} // extern "C"
