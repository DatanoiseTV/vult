this.State_variable__ctx_type_0_init = function(){
   var _ctx = {};
   _ctx.pre_x = 0.;
   return _ctx;
}
this.State_variable_change_init = function() { return this.State_variable__ctx_type_0_init();}
this.State_variable_change = function(_ctx,x){
   var v = (_ctx.pre_x != x);
   _ctx.pre_x = x;
   return v;
}
this.State_variable__ctx_type_1_init = function(){
   var _ctx = {};
   _ctx.dlow = 0.;
   _ctx.dband = 0.;
   return _ctx;
}
this.State_variable_svf_step_init = function() { return this.State_variable__ctx_type_1_init();}
this.State_variable_svf_step = function(_ctx,input,g,q,sel){
   var low = (_ctx.dlow + (g * _ctx.dband));
   var high = (input + (- low) + (- (q * _ctx.dband)));
   var band = ((g * high) + _ctx.dband);
   var notch = (high + low);
   _ctx.dband = this.clip(band,(-1.),1.);
   _ctx.dlow = this.clip(low,(-1.),1.);
   var output = {};
   if((sel == (0|0)))output = low;
   else
   if((sel == (1|0)))output = high;
   else
   if((sel == (2|0)))output = band;
   else
   output = notch;
   return output;
}
this.State_variable__ctx_type_2_init = function(){
   var _ctx = {};
   _ctx.step = this.State_variable__ctx_type_1_init();
   _ctx.g = 0.;
   _ctx._inst1 = this.State_variable__ctx_type_0_init();
   return _ctx;
}
this.State_variable_svf_init = function() { return this.State_variable__ctx_type_2_init();}
this.State_variable_svf = function(_ctx,input,fc,q,sel){
   fc = this.clip(fc,0.,1.);
   q = this.clip(q,0.,1.);
   var fix_q = (2. * (1. + (- q)));
   if(this.State_variable_change(_ctx._inst1,fc)){
      _ctx.g = (fc * 0.5);
   }
   var x1 = this.State_variable_svf_step(_ctx.step,input,_ctx.g,fix_q,sel);
   var x2 = this.State_variable_svf_step(_ctx.step,input,_ctx.g,fix_q,sel);
   return ((x1 + x2) * 0.5);
}
