
/* Code automatically generated by Vult https://github.com/modlfo/vult */
#include "sf_f.h"

fix16_t Sf_f_process(fix16_t input){
   return fix_mul(input,input);
}

void Sf_f_noteOn(int note, int velocity, int channel){
}

void Sf_f_noteOff(int note, int channel){
}

void Sf_f_controlChange(int control, int value, int channel){
}

void Sf_f_default(){
}



extern "C" {

static t_class *sf_f_tilde_class;

typedef struct _sf_f_tilde {
   t_object  x_obj;
   float dummy;
   float data;
} t_sf_f_tilde;

t_int *sf_f_tilde_perform(t_int *w)
{
   t_sf_f_tilde *x = (t_sf_f_tilde *)(w[1]);

   t_sample *in_0 = (t_sample *)(w[2]); 
   t_sample *out_0 = (t_sample *)(w[3]); 

   int n = (int)(w[4]); 

   while (n--) {
   fix16_t ret =  Sf_f_process(float_to_fix(*(in_0++))); 
   *(out_0++) = fix_to_float(ret); 
   }

   return (w+5);
}

void sf_f_tilde_dsp(t_sf_f_tilde *x, t_signal **sp)
{
   dsp_add(sf_f_tilde_perform, 4,
   x, 
   sp[0]->s_vec, 
   sp[1]->s_vec, 

   sp[0]->s_n);
}

void *sf_f_tilde_new()
{
   t_sf_f_tilde *x = (t_sf_f_tilde *)pd_new(sf_f_tilde_class);

   
   


   outlet_new(&x->x_obj, &s_signal); 

   return (void *)x;
}

void sf_f_tilde_delete(t_sf_f_tilde *x){

}

void sf_f_noteOn(t_sf_f_tilde *x, t_floatarg note, t_floatarg velocity, t_floatarg channel){
   if((int)velocity) Sf_f_noteOn((int)note,(int)velocity,(int)channel);
   else Sf_f_noteOff((int)note,(int)channel);
}


void sf_f_noteOff(t_sf_f_tilde *x, t_floatarg note, t_floatarg channel) {
   Sf_f_noteOff((int)note,(int)channel);
}


void sf_f_controlChange(t_sf_f_tilde *x, t_floatarg control, t_floatarg value, t_floatarg channel) {
   Sf_f_controlChange((int)control,(int)value,(int)channel);
}


void sf_f_tilde_setup(void) {
   sf_f_tilde_class = class_new(gensym("sf_f~"),
      (t_newmethod)sf_f_tilde_new, // constructor function
      (t_method)sf_f_tilde_delete, // destructor function
      sizeof(t_sf_f_tilde), // size of the object
      CLASS_DEFAULT, // type of object
      A_NULL); // arguments passed

   class_addmethod(sf_f_tilde_class, (t_method)sf_f_tilde_dsp, gensym("dsp"), A_NULL);
   CLASS_MAINSIGNALIN(sf_f_tilde_class, t_sf_f_tilde, dummy);

   class_addmethod(sf_f_tilde_class, (t_method)sf_f_noteOn,        gensym("noteOn"),        A_DEFFLOAT, A_DEFFLOAT, A_DEFFLOAT, A_NULL);
   class_addmethod(sf_f_tilde_class, (t_method)sf_f_noteOff,       gensym("noteOff"),       A_DEFFLOAT, A_DEFFLOAT, A_NULL);
   class_addmethod(sf_f_tilde_class, (t_method)sf_f_controlChange, gensym("controlChange"), A_DEFFLOAT, A_DEFFLOAT, A_DEFFLOAT, A_NULL);
}

} // extern "C"
