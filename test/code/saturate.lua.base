
local this = {}
local ffi = require("ffi")
function this.ternary(cond,then_,else_) if cond then return then_ else return else_ end end
function this.eps()             return 1e-18; end
function this.pi()              return 3.1415926535897932384; end
function this.random()          return math.random(); end
function this.irandom()         return math.floor(math.random() * 4294967296); end
function this.clip(x,low,high)  return (this.ternary(x<low,low,this.ternary(x>high,high,x))); end
function this.real(x)           return x; end
function this.int(x)            local int_part,_ = math.modf(x) return int_part; end
function this.sin(x)            return math.sin(x); end
function this.cos(x)            return math.cos(x); end
function this.abs(x)            return math.abs(x); end
function this.exp(x)            return math.exp(x); end
function this.floor(x)          return math.floor(x); end
function this.tan(x)            return math.tan(x); end
function this.tanh(x)           return math.tanh(x); end
function this.sqrt(x)           return x; end
function this.set(a,i,v)        a[i+1]=v; end
function this.get(a,i)          return a[i+1]; end
function this.makeArray(size,v) local a = {}; for i=1,size do a[i]=v end return a; end
function this.wrap_array(a)     return a; end
local Saturate_table_c0 = {(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-1.0000),(-0.9999),(-0.9999),(-0.9999),(-0.9998),(-0.9997),(-0.9996),(-0.9994),(-0.9992),(-0.9989),(-0.9985),(-0.9979),(-0.9970),(-0.9959),(-0.9942),(-0.9920),(-0.9890),(-0.9849),(-0.9793),(-0.9717),(-0.9615),(-0.9478),(-0.9297),(-0.9057),(-0.8744),(-0.8340),(-0.7824),(-0.7179),(-0.6387),(-0.5445),(-0.4367),(-0.3198),(-0.2026),(-0.0977),(-0.0198),0.0211,0.0267,0.0133,0.0018,0.0000,(-0.0018),(-0.0133),(-0.0267),(-0.0211),0.0198,0.0977,0.2026,0.3198,0.4367,0.5445,0.6387,0.7179,0.7824,0.8340,0.8744,0.9057,0.9297,0.9478,0.9615,0.9717,0.9793,0.9849,0.9890,0.9920,0.9942,0.9959,0.9970,0.9979,0.9985,0.9989,0.9992,0.9994,0.9996,0.9997,0.9998,0.9999,0.9999,0.9999,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000};
local Saturate_table_c1 = {(-0.0000),(-0.0000),0.0000,0.0000,(-0.0000),(-0.0000),(-0.0000),0.0000,(-0.0000),(-0.0000),(-0.0000),0.0000,0.0000,(-0.0000),(-0.0000),0.0000,0.0000,0.0000,(-0.0000),0.0000,0.0000,(-0.0000),(-0.0000),0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,(-0.0000),(-0.0000),0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0001,0.0001,0.0001,0.0002,0.0002,0.0003,0.0005,0.0007,0.0010,0.0014,0.0021,0.0030,0.0043,0.0061,0.0087,0.0125,0.0177,0.0252,0.0356,0.0502,0.0705,0.0985,0.1370,0.1889,0.2582,0.3484,0.4626,0.6010,0.7583,0.9205,1.0627,1.1532,1.1678,1.1121,1.0334,0.9967,1.0334,1.1121,1.1678,1.1532,1.0627,0.9205,0.7583,0.6010,0.4626,0.3484,0.2582,0.1889,0.1370,0.0985,0.0705,0.0502,0.0356,0.0252,0.0177,0.0125,0.0087,0.0061,0.0043,0.0030,0.0021,0.0014,0.0010,0.0007,0.0005,0.0003,0.0002,0.0002,0.0001,0.0001,0.0001,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,(-0.0000),0.0000,0.0000,(-0.0000),0.0000,0.0000,(-0.0000),0.0000,0.0000,(-0.0000),(-0.0000),0.0000,0.0000,0.0000,0.0000,(-0.0000),(-0.0000),(-0.0000),0.0000,(-0.0000),0.0000,(-0.0000),(-0.0000),0.0000,0.0000,(-0.0000),0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,(-0.0000),0.0000,(-0.0000)};
local Saturate_table_c2 = {0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,0.0000,(-0.0000),0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,(-0.0000),0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0001,0.0001,0.0001,0.0002,0.0003,0.0004,0.0006,0.0009,0.0014,0.0021,0.0031,0.0046,0.0068,0.0101,0.0150,0.0221,0.0326,0.0477,0.0693,0.0996,0.1405,0.1933,0.2560,0.3209,0.3710,0.3805,0.3226,0.1878,0.0000,(-0.1878),(-0.3226),(-0.3805),(-0.3710),(-0.3209),(-0.2560),(-0.1933),(-0.1405),(-0.0996),(-0.0693),(-0.0477),(-0.0326),(-0.0221),(-0.0150),(-0.0101),(-0.0068),(-0.0046),(-0.0031),(-0.0021),(-0.0014),(-0.0009),(-0.0006),(-0.0004),(-0.0003),(-0.0002),(-0.0001),(-0.0001),(-0.0001),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),(-0.0000),0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.0000};
function this.Saturate_table(x)
   local index = this.clip(this.int((5.0000 * (x + 24.0000))),0,240);
   return (Saturate_table_c0[index+1] + (x * (Saturate_table_c1[index+1] + (Saturate_table_c2[index+1] * x))));

end

function this.Saturate_process(_ctx,x)
   return this.Saturate_table(x);

end

function this.Saturate_noteOn(_ctx,note,velocity,channel)

end

function this.Saturate_noteOff(_ctx,note,channel)

end

function this.Saturate_controlChange(_ctx,control,value,channel)

end

function this.Saturate_default(_ctx)

end


function this.process(x) return this.Saturate_process(x) end
function this.noteOn(note,velocity,channel) return this.Saturate_noteOn(note,velocity,channel) end
function this.noteOff(note,channel) return this.Saturate_noteOff(note,channel) end
function this.controlChange(control,value,channel) return this.Saturate_controlChange(control,value,channel) end
function this.init() return this.Saturate_process_init() end
function this.default(ctx) return this.Saturate_default(ctx) end
this.config = { inputs = 1, outputs = 1, noteon_inputs = 3, noteoff_inputs = 2, controlchange_inputs = 3, is_active = false }
return this
