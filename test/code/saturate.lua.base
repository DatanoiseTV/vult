
local this = {}
local ffi = require("ffi")
function this.ternary(cond,then_,else_) if cond then return then_ else return else_ end end
function this.eps()             return 1e-18; end
function this.pi()              return 3.1415926535897932384; end
function this.random()          return math.random(); end
function this.irandom()         return math.floor(math.random() * 4294967296); end
function this.clip(x,low,high)  return (this.ternary(x<low,low,this.ternary(x>high,high,x))); end
function this.real(x)           return x; end
function this.int(x)            local int_part,_ = math.modf(x) return int_part; end
function this.sin(x)            return math.sin(x); end
function this.cos(x)            return math.cos(x); end
function this.abs(x)            return math.abs(x); end
function this.exp(x)            return math.exp(x); end
function this.floor(x)          return math.floor(x); end
function this.tan(x)            return math.tan(x); end
function this.tanh(x)           return math.tanh(x); end
function this.sqrt(x)           return x; end
function this.set(a,i,v)        a[i+1]=v; end
function this.get(a,i)          return a[i+1]; end
function this.makeArray(size,v) local a = {}; for i=1,size do a[i]=v end return a; end
function this.wrap_array(a)     return a; end
local Saturate_table_c0 = {(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-1.000000),(-0.999999),(-0.999999),(-0.999999),(-0.999998),(-0.999997),(-0.999996),(-0.999994),(-0.999992),(-0.999988),(-0.999983),(-0.999976),(-0.999965),(-0.999951),(-0.999930),(-0.999901),(-0.999860),(-0.999802),(-0.999720),(-0.999605),(-0.999445),(-0.999220),(-0.998906),(-0.998469),(-0.997862),(-0.997020),(-0.995855),(-0.994249),(-0.992041),(-0.989018),(-0.984891),(-0.979283),(-0.971696),(-0.961485),(-0.947822),(-0.929662),(-0.905713),(-0.874421),(-0.833984),(-0.782442),(-0.717866),(-0.638728),(-0.544527),(-0.436708),(-0.319822),(-0.202552),(-0.097704),(-0.019758),0.021102,0.026671,0.013285,0.001788,0.000000,(-0.001788),(-0.013285),(-0.026671),(-0.021102),0.019758,0.097704,0.202552,0.319822,0.436708,0.544527,0.638728,0.717866,0.782442,0.833984,0.874421,0.905713,0.929662,0.947822,0.961485,0.971696,0.979283,0.984891,0.989018,0.992041,0.994249,0.995855,0.997020,0.997862,0.998469,0.998906,0.999220,0.999445,0.999605,0.999720,0.999802,0.999860,0.999901,0.999930,0.999951,0.999965,0.999976,0.999983,0.999988,0.999992,0.999994,0.999996,0.999997,0.999998,0.999999,0.999999,0.999999,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000,1.000000};
local Saturate_table_c1 = {(-0.000000),(-0.000000),0.000000,0.000000,(-0.000000),(-0.000000),(-0.000000),0.000000,(-0.000000),(-0.000000),(-0.000000),0.000000,0.000000,(-0.000000),(-0.000000),0.000000,0.000000,0.000000,(-0.000000),0.000000,0.000000,(-0.000000),(-0.000000),0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,(-0.000000),(-0.000000),0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000001,0.000001,0.000001,0.000002,0.000003,0.000004,0.000006,0.000008,0.000012,0.000017,0.000025,0.000036,0.000053,0.000077,0.000111,0.000161,0.000232,0.000336,0.000485,0.000699,0.001007,0.001448,0.002081,0.002987,0.004281,0.006124,0.008747,0.012467,0.017732,0.025159,0.035594,0.050190,0.070495,0.098546,0.136952,0.188926,0.258165,0.348441,0.462650,0.601023,0.758327,0.920489,1.062691,1.153214,1.167815,1.112124,1.033369,0.996707,1.033369,1.112124,1.167815,1.153214,1.062691,0.920489,0.758327,0.601023,0.462650,0.348441,0.258165,0.188926,0.136952,0.098546,0.070495,0.050190,0.035594,0.025159,0.017732,0.012467,0.008747,0.006124,0.004281,0.002987,0.002081,0.001448,0.001007,0.000699,0.000485,0.000336,0.000232,0.000161,0.000111,0.000077,0.000053,0.000036,0.000025,0.000017,0.000012,0.000008,0.000006,0.000004,0.000003,0.000002,0.000001,0.000001,0.000001,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,(-0.000000),0.000000,0.000000,(-0.000000),0.000000,0.000000,(-0.000000),0.000000,0.000000,(-0.000000),(-0.000000),0.000000,0.000000,0.000000,0.000000,(-0.000000),(-0.000000),(-0.000000),0.000000,(-0.000000),0.000000,(-0.000000),(-0.000000),0.000000,0.000000,(-0.000000),0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,(-0.000000),0.000000,(-0.000000)};
local Saturate_table_c2 = {0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,0.000000,(-0.000000),0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,(-0.000000),0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000001,0.000001,0.000002,0.000002,0.000004,0.000005,0.000008,0.000012,0.000017,0.000026,0.000039,0.000057,0.000086,0.000128,0.000190,0.000283,0.000421,0.000627,0.000934,0.001390,0.002068,0.003078,0.004577,0.006801,0.010095,0.014959,0.022114,0.032571,0.047716,0.069345,0.099589,0.140541,0.193292,0.255994,0.320851,0.370985,0.380472,0.322615,0.187810,0.000000,(-0.187810),(-0.322615),(-0.380472),(-0.370985),(-0.320851),(-0.255994),(-0.193292),(-0.140541),(-0.099589),(-0.069345),(-0.047716),(-0.032571),(-0.022114),(-0.014959),(-0.010095),(-0.006801),(-0.004577),(-0.003078),(-0.002068),(-0.001390),(-0.000934),(-0.000627),(-0.000421),(-0.000283),(-0.000190),(-0.000128),(-0.000086),(-0.000057),(-0.000039),(-0.000026),(-0.000017),(-0.000012),(-0.000008),(-0.000005),(-0.000004),(-0.000002),(-0.000002),(-0.000001),(-0.000001),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),(-0.000000),0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000,0.000000};
function this.Saturate_table(x)
   local index = this.clip(this.int((5.000000 * (x + 24.000000))),0,240);
   return (Saturate_table_c0[index+1] + (x * (Saturate_table_c1[index+1] + (Saturate_table_c2[index+1] * x))));

end

function this.Saturate_process(_ctx,x)
   return this.Saturate_table(x);

end

function this.Saturate_noteOn(_ctx,note,velocity,channel)

end

function this.Saturate_noteOff(_ctx,note,channel)

end

function this.Saturate_controlChange(_ctx,control,value,channel)

end

function this.Saturate_default(_ctx)

end


function this.process(x) return this.Saturate_process(x) end
function this.noteOn(note,velocity,channel) return this.Saturate_noteOn(note,velocity,channel) end
function this.noteOff(note,channel) return this.Saturate_noteOff(note,channel) end
function this.controlChange(control,value,channel) return this.Saturate_controlChange(control,value,channel) end
function this.init() return this.Saturate_process_init() end
function this.default(ctx) return this.Saturate_default(ctx) end
this.config = { inputs = 1, outputs = 1, noteon_inputs = 3, noteoff_inputs = 2, controlchange_inputs = 3, is_active = false }
return this
